<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="./echarts.min.js"></script>
    <style>
      .echarts {
        width: 1000px;
        height: 600px;
        margin: 80px auto 0;
      }
    </style>
  </head>
  <body>
    <div class="echarts"></div>
    <script>
        const myCharts = echarts.init(document.querySelector('.echarts'))

        /* 1. åŸºæœ¬æ ¼å¼ */
        const option1 = {
            legend: {},
            tooltip: {},
            dataset: {
                // æä¾›ä¸€ä»½æ•°æ®ã€‚
                source: [
                    ['product',       '2015', '2016', '2017'], // ç»´åº¦: æ­¤å¤„æœ‰4ä¸ªç»´åº¦
                    ['Matcha Latte',   43.3,   85.8,   93.7],  // æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ªæ•°æ®é¡¹(ç«–ç€çœ‹ ä¸€åˆ—ä¸€åˆ—éƒ½å¯¹åº”)
                    ['Milk Tea',       83.1,   73.4,   55.1],
                    ['Cheese Cocoa',   86.4,   65.2,   82.5],
                    ['Walnut Brownie', 72.4,   53.9,   39.1]
                ]
            },
            // å£°æ˜Žä¸€ä¸ª X è½´ï¼Œç±»ç›®è½´ï¼ˆcategoryï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç±»ç›®è½´å¯¹åº”åˆ° dataset ç¬¬ä¸€åˆ—ã€‚
            xAxis: {type: 'category'},
            // å£°æ˜Žä¸€ä¸ª Y è½´ï¼Œæ•°å€¼è½´ã€‚
            yAxis: {},
            // å£°æ˜Žå¤šä¸ª bar ç³»åˆ—ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªç³»åˆ—ä¼šè‡ªåŠ¨å¯¹åº”åˆ° dataset çš„æ¯ä¸€åˆ—ã€‚
            series: [
                {type: 'bar'},
                {type: 'bar'},
                {type: 'bar'}
            ]
        }

        /* 2.å¯¹è±¡æ•°ç»„çš„æ ¼å¼ */
        const option2 = {
            legend: {},
            tooltip: {
                trigger: 'axis',
                position: (pt) => [pt[0], '30%'],
                // formatter: (params) => {
                //     console.log('ðŸš€ ~ params', params);
                // },
            },
            dataset: {
                // ç”¨ dimensions æŒ‡å®šäº†ç»´åº¦çš„é¡ºåºã€‚ç›´è§’åæ ‡ç³»ä¸­ï¼Œ
                // é»˜è®¤æŠŠç¬¬ä¸€ä¸ªç»´åº¦æ˜ å°„åˆ° X è½´ä¸Šï¼Œç¬¬äºŒä¸ªç»´åº¦æ˜ å°„åˆ° Y è½´ä¸Šã€‚
                // å¦‚æžœä¸æŒ‡å®š dimensionsï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®š series.encode
                dimensions: ['product', '2015', '2016', '2017', '2018', '2019'],

                // ä¹Ÿå¯ä»¥ç”¨å¯¹è±¡çš„æ ¼å¼ç»™ç»´åº¦æŒ‡å®šname å’Œtype, å¦‚æžœå› ä¸ºæ•°æ®ä¸ºç©ºä¹‹ç±»åŽŸå› å¯¼è‡´åˆ¤æ–­ä¸è¶³å¤Ÿå‡†ç¡®æ—¶ï¼Œå¯ä»¥æ‰‹åŠ¨è®¾ç½®ç»´åº¦ç±»åž‹ã€‚
                // (å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦åŽ»è®¾ç½®ç»´åº¦ç±»åž‹ï¼Œå› ä¸ºä¼šè‡ªåŠ¨åˆ¤æ–­)ã€‚
                /* dimensions: [
                    {name: 'product', type: 'ordinal'}, // ç±»ç›®ã€æ–‡æœ¬è¿™äº› string ç±»åž‹çš„æ•°æ®ï¼Œå¦‚éœ€åœ¨æ•°è½´ä¸Šä½¿ç”¨ï¼Œé¡»æ˜¯ 'ordinal' ç±»åž‹
                    {name: '2015', type: 'int'}, // åœ¨å­˜å‚¨æ—¶å€™ä¼šä½¿ç”¨ TypedArrayï¼Œå¯¹æ€§èƒ½ä¼˜åŒ–æœ‰å¥½å¤„ã€‚
                    {name: '2016', type: 'time'}, // è‡ªåŠ¨è§£æžæ•°æ®æˆæ—¶é—´æˆ³
                    '2017',
                ], */

                source: [
                    // å¯¹è±¡å½¢å¼
                    // {product: 'Matcha Latte',   '2015': 43.3, '2016': 89.76, '2017': 93.7},
                    // {product: 'Milk Tea',       '2015': 83.1, '2016': 73.4, '2017': 55.1},
                    // {product: 'Cheese Cocoa',   '2015': 86.4, '2016': 65.2, '2017': 82.5},
                    // {product: 'Walnut Brownie', '2015': 72.4, '2016': 53.9, '2017': 39.1}
                    // æ•°ç»„å½¢å¼
                    ['Matcha Latte',  41.1,   30.4,   65.1, 65.1, 65.1],
                    ['Milk Tea',      86.5,   92.1,   85.7, 85.7, 85.7],
                    ['Cheese Cocoa',  24.1,   67.2,   79.5, 79.5, 79.5]
                ]
            },
            xAxis: {type: 'category'},
            yAxis: {},
            series: [
                {type: 'bar'},
                {type: 'bar'},
                {type: 'bar'},
                {type: 'bar'},
                {type: 'bar'},
            ]
        };

        /* 3. æŠŠæ•°æ®é›†ï¼ˆ dataset ï¼‰çš„è¡Œæˆ–åˆ—æ˜ å°„ä¸ºç³»åˆ—ï¼ˆseriesï¼‰ */
        option3 = {
            legend: {},
            tooltip: {},
            dataset: {
                source: [
                    ['product',      '2012', '2013', '2014', '2015'],
                    ['Matcha Latte',  41.1,   30.4,   65.1,   53.3],
                    ['Milk Tea',      86.5,   92.1,   85.7,   83.1],
                    ['Cheese Cocoa',  24.1,   67.2,   79.5,   86.4]
                ]
            },
            xAxis: [
                {type: 'category', gridIndex: 0},
                {type: 'category', gridIndex: 1}
            ],
            yAxis: [
                {gridIndex: 0},
                {gridIndex: 1}
            ],
            grid: [
                {bottom: '55%'},
                {top: '55%'}
            ],
            series: [
                // è¿™å‡ ä¸ªç³»åˆ—ä¼šåœ¨ç¬¬ä¸€ä¸ªç›´è§’åæ ‡ç³»ä¸­ï¼Œæ¯ä¸ªç³»åˆ—å¯¹åº”åˆ° dataset çš„æ¯ä¸€è¡Œ(é»˜è®¤seriesLayoutBy: 'column')ã€‚(æ¯ä¸€è¡Œ ä»£è¡¨ä¸€ç»„æ•°æ®(ä¸€ç§é¢œè‰²))
                {type: 'bar', seriesLayoutBy: 'row'},
                {type: 'bar', seriesLayoutBy: 'row'},
                {type: 'bar', seriesLayoutBy: 'row'},
                // è¿™å‡ ä¸ªç³»åˆ—ä¼šåœ¨ç¬¬äºŒä¸ªç›´è§’åæ ‡ç³»ä¸­ï¼Œæ¯ä¸ªç³»åˆ—å¯¹åº”åˆ° dataset çš„æ¯ä¸€åˆ—ã€‚(æ¯ä¸€åˆ— ä»£è¡¨ä¸€ç»„æ•°æ®(ä¸€ç§é¢œè‰²))
                {type: 'bar', seriesLayoutBy: 'column', xAxisIndex: 1, yAxisIndex: 1}, //AxisIndex æŒ‡å®šå“ªä¸ªè½´äº§ç”Ÿä½œç”¨(0æŒ‡ç¬¬ä¸€ä¸ªå›¾çš„x/yè½´)
                {type: 'bar', seriesLayoutBy: 'column', xAxisIndex: 1, yAxisIndex: 1},
                {type: 'bar', seriesLayoutBy: 'column', xAxisIndex: 1, yAxisIndex: 1},
                {type: 'bar', seriesLayoutBy: 'column', xAxisIndex: 1, yAxisIndex: 1}
            ]
        }

        /* 4. æ•°æ®åˆ°å›¾å½¢çš„æ˜ å°„ï¼ˆ series.encode ï¼‰â†’ æ•°æ®å¯¹åº”è¡¨æ ¼é‡Œçš„æ˜¾ç¤ºä½ç½® */
        const option4 = {
            tooltip: {},
            legend: {},
            dataset: {
                source: [
                    ['score', 'amount',    'product'     ],
                    [  89.3,    58212,   'Matcha Latte'   ],
                    [  57.1,    78254,   'Milk Tea'       ],
                    [  74.4,    41032,   'Cheese Cocoa'   ],
                    [  50.1,    12755,   'Cheese Brownie' ],
                    [  89.7,    20145,   'Matcha Cocoa'   ],
                    [  68.1,    79146,   'Tea'            ],
                    [  19.6,    91852,   'Orange Juice'   ],
                    [  10.6,    101852,   'Lemon Juice'   ],
                    [  32.7,    20112,   'Walnut Brownie' ]
                ]
            },
            xAxis: {},
            yAxis: {type: 'category'},
            series: [
                // ä¸Šè¿°ä¼ å…¥äº†3ä¸ªçº¬åº¦çš„æ•°æ®, ä½†æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨seriesä¸­, å•ç‹¬å®šä¹‰å½“å‰æŸä¸€ä¸ªå›¾å½¢(ä¸ä¸€å®šéžè¦å…¨éƒ¨å±•ç¤º), ä¸ºæœŸé…ç½®datasetä¸­æƒ³è¦å±•ç¤ºçš„æ•°æ®
                {
                    type: 'bar',
                    encode: {
                        // 4.1 å…¬å…±é…ç½®:
                        // ç»´åº¦: "product" å’Œ ç»´åº¦: "score" çš„å€¼åœ¨ tooltip(æŸ±æ¡hover) ä¸­æ˜¾ç¤º
                        tooltip: ['product', 'score'],

                        // ä½¿ç”¨ â€œç»´åº¦ 1â€ å’Œ â€œç»´åº¦ 3â€ çš„ç»´åº¦åè¿žèµ·æ¥ä½œä¸ºç³»åˆ—å(legend)ã€‚ï¼ˆæœ‰æ—¶å€™åå­—æ¯”è¾ƒé•¿ï¼Œè¿™å¯ä»¥é¿å…åœ¨ series.name é‡å¤è¾“å…¥è¿™äº›åå­—ï¼‰
                        seriesName: [1, 2],

                        // è¡¨ç¤ºä½¿ç”¨ â€œç»´åº¦2â€ ä¸­çš„å€¼ä½œä¸º idã€‚è¿™åœ¨ä½¿ç”¨ setOption åŠ¨æ€æ›´æ–°æ•°æ®æ—¶æœ‰ç”¨å¤„ï¼Œå¯ä»¥ä½¿æ–°è€æ•°æ®ç”¨ id å¯¹åº”èµ·æ¥ï¼Œä»Žè€Œèƒ½å¤Ÿäº§ç”Ÿåˆé€‚çš„æ•°æ®æ›´æ–°åŠ¨ç”»ã€‚
                        itemId: 2,

                        // æŒ‡å®šæ•°æ®é¡¹çš„åç§°ä½¿ç”¨ â€œç»´åº¦3â€ åœ¨é¥¼å›¾ç­‰å›¾è¡¨ä¸­æœ‰ç”¨ï¼Œå¯ä»¥ä½¿è¿™ä¸ªåå­—æ˜¾ç¤ºåœ¨å›¾ä¾‹ï¼ˆlegendï¼‰ä¸­ã€‚
                        itemName: 3,

                        // 4.2.1 ç›´è§’åæ ‡ç³»ï¼ˆgrid/cartesianï¼‰ç‰¹æœ‰çš„å±žæ€§ï¼š
                        // x: 'amount', // å°† ç»´åº¦å - "amount" åˆ—æ˜ å°„åˆ° X è½´ã€‚
                        // y: 'product', // å°† ç»´åº¦å - "product" åˆ—æ˜ å°„åˆ° Y è½´ã€‚
                        // ä¹Ÿå¯ä»¥æ˜¯ç»´åº¦åºå·(ä»Ž0å¼€å§‹)
                        y: 'product',
                        x: 1,

                        // 4.3 å¯¹äºŽä¸€äº›æ²¡æœ‰åæ ‡ç³»çš„å›¾è¡¨ï¼Œä¾‹å¦‚é¥¼å›¾ã€æ¼æ–—å›¾ç­‰ï¼Œå¯ä»¥æ˜¯ï¼š
                        // value: 3
                    }
                },
            ]
        };

        myCharts.setOption(option4)

        const array = [
        {
            test_id: 2021010100281397,
            device_id: 53,
            time_stamp: 1614583406,
            cpu: 12.5,
            mem_dalvik: 15,
            men_total: 13.2,
            men_native: 14,
            net_in: 16,
            net_out: 17,
            fps: 24,
        },
        {
            test_id: 2021010100281397,
            device_id: 53,
            time_stamp: 1614586406,
            cpu: 13.1,
            mem_dalvik: 15.4,
            men_total: 13.2,
            men_native: 14.1,
            net_in: 16,
            net_out: 17,
            fps: 24,
        },
        {
            test_id: 2021010100281397,
            device_id: 53,
            time_stamp: 1614587406,
            cpu: 16.1,
            mem_dalvik: 13.4,
            men_total: 11.2,
            men_native: 13.1,
            net_in: 12,
            net_out: 15,
            fps: 24,
        },
        {
            test_id: 2021010100281397,
            device_id: 53,
            time_stamp: 1614588406,
            cpu: 12.1,
            mem_dalvik: 16.4,
            men_total: 14.2,
            men_native: 17.1,
            net_in: 14,
            net_out: 13,
            fps: 26,
        },
        {
            test_id: 2021010100281397,
            device_id: 53,
            time_stamp: 1614589406,
            cpu: 16.5,
            mem_dalvik: 15.6,
            men_total: 15.2,
            men_native: 15.1,
            net_in: 13,
            net_out: 17,
            fps: 20,
        },
    ];
    
    const arr = array.map((item) => item.cpu)
    arr.unshift('time_stamp')
    // console.log(arr);
    // console.log(
    //     array.map((item) => {
    //         return [item.time_stamp, item.cpu];
    //     })
    // );

    </script>
  </body>
</html>
